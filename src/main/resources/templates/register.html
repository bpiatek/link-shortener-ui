<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">
<body>
<div layout:fragment="content" class="flex justify-center items-center h-screen">

  <div class="w-full max-w-md bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4">
    <h2 class="text-2xl font-bold mb-6 text-center text-gray-800">Create Account</h2>

    <!-- 1. Global Error Alert (e.g. 409 Conflict / 500 Error) -->
    <div th:if="${error}" class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-4" role="alert">
      <span class="block sm:inline" th:text="${error}">Error message</span>
    </div>

    <form th:action="@{/register}" th:object="${registerRequest}" method="post">

      <!-- Email Field -->
      <div class="mb-4">
        <label class="block text-gray-700 text-sm font-bold mb-2" for="email">
          Email Address
        </label>
        <!-- Add 'border-red-500' class if this field has errors -->
        <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline"
               th:classappend="${#fields.hasErrors('email')} ? 'border-red-500' : ''"
               id="email" type="email" th:field="*{email}" required placeholder="you@example.com">

        <!-- 2. Field Specific Error (e.g. 400 Validation) -->
        <p th:if="${#fields.hasErrors('email')}"
           th:errors="*{email}"
           class="text-red-500 text-xs italic mt-1">
          Invalid email
        </p>
      </div>

      <!-- Password Field -->
      <div class="mb-6">
        <label class="block text-gray-700 text-sm font-bold mb-2" for="password">
          Password
        </label>
        <input class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline"
               th:classappend="${#fields.hasErrors('password')} ? 'border-red-500' : ''"
               id="password" type="password" th:field="*{password}" required placeholder="******************">

        <!-- 2. Field Specific Error -->
        <p th:if="${#fields.hasErrors('password')}"
           th:errors="*{password}"
           class="text-red-500 text-xs italic mt-1">
          Password error
        </p>
      </div>

      <div class="flex items-center justify-between">
        <button class="bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline w-full"
                type="submit">
          Sign Up
        </button>
      </div>
    </form>

    <!-- ... login link ... -->
  </div>
</div>
</body>
</html>